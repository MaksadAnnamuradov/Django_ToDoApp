{% extends 'base.html' %}

{% block title %}
Tasks -
{% endblock title %}

{% block content %}
    <!-- <h1>Hello, world!</h1> -->

    <!--The {% csrf_token %} template tag introduces a hidden field with an autogenerated token
        to avoid cross-site request forgery (CSRF) attacks. These attacks consist of a malicious website or
        program performing an unwanted action for a user on your site.-->

    <form method="post">
        {% csrf_token %}

        <div class="inputContainer">
            <input type="text" id="title" class="taskTitle" placeholder="What do you need to do?" name="title" required>
            <label for="title">Task Title</label>
        </div>

        <div class="inputContainer">
            <input type="text" id="content" class="taskContent" placeholder="What is it?" name="content" required>
            <label for="title">Task Description</label>
        </div>

        <div class="inputContainer">
            <input type="datetime-local" value="2020-12-12T19:30" min="2020-12-12T00:00" id="due_date" class="task_due_date" name="due_date">
            <label for="due_date">Due Date</label>
        </div>


        <div class="inputContainer half last">
            <i class="fa fa-caret-down selectArrow"></i>
            <select id="category" class="taskCategory" name="category" required>
            <option class="disabled" value="">Choose a category</option>
            {% for category in categories %}
                <option class="" value="{{ category.name }}" name="{{ category.name }}">{{ category.name }}</option>
            {% endfor %}
            </select>
            <label for="category">Category</label>
        </div>

        <button class="taskAdd" name="taskAdd" type="submit"><i class="fa fa-plus icon"></i>Add task</button>
        <button class="taskDelete" name="taskDelete" formnovalidate="" type="submit" onclick="$('input#sublist').click();"><i class="fa fa-trash-o icon"></i>Delete Tasks</button>
    </form>

    <ol>
        {% for task in tasks %}
            <li>

                {% if task.completed == True %}
                    <strike>{{task.title}} </strike>
                {% else %}
                    {{task.title}}
                    {{task.content}}
                    {{task.due_date}}
                    {{task.category}}
                {% endif %}

                | <button><i class="fa fa-edit icon"></i><a href="{% url "update_task" task.id %}">Edit</a></button> |
                <button><i class="fa fa-trash-o icon"></i><a href="{% url "delete_task" task.id %}">Delete</a></button>

        {% endfor %}
    </ol>


{% endblock content %}